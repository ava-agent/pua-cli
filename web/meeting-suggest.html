<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¼šè®®å‘è¨€å»ºè®® - PUA CLI</title>
  <meta name="description" content="ä¼šè®®å‘è¨€å»ºè®® - æ ¹æ®è§’è‰²å’Œåœºæ™¯ç”Ÿæˆåˆé€‚çš„ä¼šè®®å‘è¨€ï¼Œ6ç§è§’è‰²5ç§ä¼šè®®åœºæ™¯">
  <meta property="og:title" content="ä¼šè®®å‘è¨€å»ºè®® - PUA CLI">
  <meta property="og:description" content="æ ¹æ®è§’è‰²å’Œä¼šè®®åœºæ™¯ï¼Œæ™ºèƒ½ç”Ÿæˆ1-3æ¡å‘è¨€å»ºè®®ï¼ŒåŠ©ä½ ä»å®¹åº”å¯¹å„ç±»ä¼šè®®">
  <meta property="og:type" content="website">
  <meta name="theme-color" content="#0a0a0a">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¤</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'JetBrains Mono', 'Consolas', monospace;
      background: #0a0a0a;
      min-height: 100vh;
      overflow-x: hidden;
      color: #e0e0e0;
    }

    /* === Terminal Shell === */
    .terminal {
      width: 90%;
      max-width: 900px;
      margin: 30px auto 40px;
      background: #0a0a0a;
      border: 1px solid #333;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      display: flex;
      flex-direction: column;
      height: calc(100vh - 120px);
      overflow: hidden;
    }

    .terminal-header {
      padding: 10px 16px;
      background: #1a1a1a;
      display: flex;
      align-items: center;
      gap: 8px;
      border-bottom: 1px solid #333;
    }

    .terminal-buttons { display: flex; gap: 8px; }
    .terminal-btn { width: 12px; height: 12px; border-radius: 50%; }
    .terminal-btn.close { background: #ff5f56; }
    .terminal-btn.minimize { background: #ffbd2e; }
    .terminal-btn.maximize { background: #27ca3f; }

    .terminal-title { color: #888; font-size: 12px; flex: 1; text-align: center; }

    .terminal-body {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      overflow-x: hidden;
      background: #0a0a0a;
      scroll-behavior: smooth;
      min-height: 0;
    }

    .terminal-body::-webkit-scrollbar { width: 8px; }
    .terminal-body::-webkit-scrollbar-track { background: #0a0a0a; }
    .terminal-body::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
    .terminal-body::-webkit-scrollbar-thumb:hover { background: #444; }

    /* === Nav Bar === */
    .nav-bar {
      position: sticky;
      top: 0;
      z-index: 50;
      background: #111;
      border-bottom: 1px solid #222;
      padding: 0 16px;
      display: flex;
      align-items: center;
      gap: 0;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    .nav-bar::-webkit-scrollbar { height: 0; }
    .nav-link {
      color: #666;
      text-decoration: none;
      font-size: 12px;
      padding: 10px 14px;
      white-space: nowrap;
      transition: all 0.2s;
      border-bottom: 2px solid transparent;
      flex-shrink: 0;
    }
    .nav-link:hover {
      color: #ccc;
      background: #1a1a1a;
    }
    .nav-link.active {
      color: #00ccff;
      border-bottom-color: #00ccff;
    }

    /* === Setup Area === */
    .setup-area {
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; }
    }

    .page-title {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 6px;
      background: linear-gradient(90deg, #00ccff, #ffcc00);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .page-subtitle {
      color: #666;
      font-size: 12px;
      margin-bottom: 24px;
    }

    /* === Section Labels === */
    .section-label {
      color: #888;
      font-size: 13px;
      margin-bottom: 10px;
      display: block;
    }

    .section-label .required {
      color: #ff5f56;
      margin-left: 4px;
    }

    /* === Role Cards === */
    .role-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 24px;
    }

    .role-card {
      background: #111;
      border: 2px solid #333;
      border-radius: 12px;
      padding: 14px 10px;
      text-align: center;
      cursor: pointer;
      transition: all 0.25s;
      user-select: none;
      position: relative;
      overflow: hidden;
    }

    .role-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at center, var(--role-glow, transparent) 0%, transparent 70%);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .role-card:hover {
      border-color: #555;
      transform: translateY(-2px);
    }

    .role-card:hover::before { opacity: 0.1; }

    .role-card.selected {
      border-color: var(--role-color, #00ccff);
      background: #1a1a1a;
    }

    .role-card.selected::before { opacity: 0.15; }

    .role-card.selected .role-check {
      opacity: 1;
      transform: scale(1);
    }

    .role-check {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--role-color, #00ccff);
      color: #000;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transform: scale(0);
      transition: all 0.25s;
    }

    .role-emoji {
      font-size: 32px;
      margin-bottom: 6px;
      display: block;
      position: relative;
    }

    .role-name {
      color: #fff;
      font-size: 14px;
      font-weight: 700;
      position: relative;
    }

    .role-desc {
      color: #666;
      font-size: 10px;
      margin-top: 4px;
      position: relative;
      line-height: 1.4;
    }

    /* === Scenario Cards === */
    .scenario-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin-bottom: 28px;
    }

    .scenario-card {
      background: #111;
      border: 2px solid #333;
      border-radius: 10px;
      padding: 14px 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.25s;
      user-select: none;
      position: relative;
    }

    .scenario-card:hover {
      border-color: #555;
      transform: translateY(-2px);
    }

    .scenario-card.selected {
      border-color: #00ccff;
      background: #0a1a2a;
    }

    .scenario-card.selected .scenario-check {
      opacity: 1;
      transform: scale(1);
    }

    .scenario-check {
      position: absolute;
      top: 6px;
      right: 6px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #00ccff;
      color: #000;
      font-size: 11px;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transform: scale(0);
      transition: all 0.25s;
    }

    .scenario-emoji {
      font-size: 24px;
      margin-bottom: 6px;
      display: block;
    }

    .scenario-name {
      color: #fff;
      font-size: 12px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .scenario-desc {
      color: #666;
      font-size: 9px;
      line-height: 1.3;
      margin-bottom: 6px;
    }

    .scenario-duration {
      color: #00ccff;
      font-size: 9px;
      background: #0a1a2a;
      padding: 2px 6px;
      border-radius: 4px;
      display: inline-block;
    }

    /* === Generate Button === */
    .generate-btn {
      display: block;
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #00aacc, #0088aa);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-family: inherit;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 4px;
    }

    .generate-btn:hover {
      background: linear-gradient(135deg, #00ccee, #00aacc);
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(0, 204, 255, 0.3);
    }

    .generate-btn:disabled {
      background: #333;
      color: #666;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .generate-hint {
      color: #555;
      font-size: 11px;
      text-align: center;
      margin-top: 8px;
    }

    /* === Result Area === */
    .result-area {
      margin-top: 28px;
      animation: fadeIn 0.4s ease-out;
      display: none;
    }

    .result-area.visible {
      display: block;
    }

    .result-divider {
      border: none;
      border-top: 1px dashed #333;
      margin-bottom: 20px;
    }

    .result-header {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
      align-items: center;
    }

    .result-tag {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 4px;
      background: #111;
      border: 1px solid #333;
    }

    .result-tag .label { color: #666; }
    .result-tag .value { color: #00ccff; margin-left: 4px; }

    /* === Speech Cards === */
    .speech-card {
      background: #111;
      border: 1px solid #333;
      border-left: 3px solid var(--speech-color, #00ccff);
      border-radius: 6px;
      padding: 16px 16px 16px 20px;
      margin-bottom: 14px;
      position: relative;
      animation: slideIn 0.3s ease-out;
      animation-fill-mode: both;
    }

    .speech-card:nth-child(1) { animation-delay: 0.1s; }
    .speech-card:nth-child(2) { animation-delay: 0.25s; }
    .speech-card:nth-child(3) { animation-delay: 0.4s; }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-12px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .speech-badge {
      position: absolute;
      top: -8px;
      left: -8px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--speech-color, #00ccff);
      color: #000;
      font-size: 12px;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .speech-content {
      color: #e0e0e0;
      font-size: 14px;
      line-height: 1.7;
      padding-left: 6px;
    }

    .speech-content::before {
      content: '\201C';
      color: var(--speech-color, #00ccff);
      font-size: 24px;
      font-weight: 700;
      margin-right: 4px;
      vertical-align: -4px;
    }

    .speech-content::after {
      content: '\201D';
      color: var(--speech-color, #00ccff);
      font-size: 24px;
      font-weight: 700;
      margin-left: 4px;
      vertical-align: -4px;
    }

    /* === Tips Section === */
    .tips-section {
      margin-top: 20px;
      padding: 12px 16px;
      background: #0a1a0a;
      border: 1px solid #1a3a1a;
      border-radius: 6px;
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }

    .tips-icon {
      font-size: 16px;
      flex-shrink: 0;
      margin-top: 1px;
    }

    .tips-text {
      color: #66aa66;
      font-size: 11px;
      line-height: 1.5;
    }

    /* === Action Buttons === */
    .action-row {
      display: flex;
      gap: 10px;
      margin-top: 18px;
    }

    .action-btn {
      flex: 1;
      padding: 10px 16px;
      border: 1px solid #333;
      border-radius: 6px;
      background: #111;
      color: #aaa;
      font-family: inherit;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }

    .action-btn:hover {
      border-color: #00ccff;
      color: #00ccff;
      background: #0a1a2a;
    }

    .action-btn.primary {
      background: linear-gradient(135deg, #00aacc, #0088aa);
      color: #fff;
      border: none;
    }

    .action-btn.primary:hover {
      background: linear-gradient(135deg, #00ccee, #00aacc);
      box-shadow: 0 2px 10px rgba(0, 204, 255, 0.2);
    }

    .copy-success {
      color: #27ca3f;
      font-size: 11px;
      text-align: center;
      margin-top: 8px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .copy-success.show { opacity: 1; }

    /* === Status Bar === */
    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 16px;
      background: #111;
      border-top: 1px solid #222;
      font-size: 11px;
      color: #555;
      flex-shrink: 0;
    }

    .status-left { display: flex; gap: 12px; }
    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #27ca3f;
      display: inline-block;
      margin-right: 4px;
      vertical-align: middle;
    }

    /* === Responsive === */
    @media (max-width: 768px) {
      .scenario-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 600px) {
      .terminal {
        width: 95%;
        margin: 10px auto;
        height: calc(100vh - 20px);
      }

      .terminal-body { padding: 12px; }

      .role-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .scenario-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .nav-link { font-size: 11px; padding: 8px 10px; }

      .page-title { font-size: 18px; }

      .action-row { flex-direction: column; }

      .result-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .status-bar {
        flex-direction: column;
        gap: 4px;
        align-items: flex-start;
      }
    }
  </style>
  <!-- Vercel Web Analytics -->
  <script>window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };</script>
  <script defer src="/_vercel/insights/script.js"></script>
</head>
<body>
  <nav class="nav-bar">
    <a class="nav-link" href="index.html">é¦–é¡µ</a>
    <a class="nav-link" href="jargon.html">é»‘è¯ç”Ÿæˆ</a>
    <a class="nav-link" href="weekly.html">å‘¨æŠ¥ç”Ÿæˆ</a>
    <a class="nav-link" href="email.html">é‚®ä»¶è½¬æ¢</a>
    <a class="nav-link active" href="meeting-suggest.html">ä¼šè®®å‘è¨€</a>
    <a class="nav-link" href="meeting.html">ä¼šè®®å®¤</a>
    <a class="nav-link" href="interview.html">å‹åŠ›é¢è¯•</a>
  </nav>
  <div class="terminal">
    <!-- Terminal Header -->
    <div class="terminal-header">
      <div class="terminal-buttons">
        <div class="terminal-btn close"></div>
        <div class="terminal-btn minimize"></div>
        <div class="terminal-btn maximize"></div>
      </div>
      <div class="terminal-title">ä¼šè®®å‘è¨€å»ºè®® â€” pua-cli</div>
    </div>

    <!-- Terminal Body -->
    <div class="terminal-body" id="terminalBody">
      <!-- Setup Area -->
      <div class="setup-area">
        <div class="page-title">ğŸ¤ ä¼šè®®å‘è¨€å»ºè®®</div>
        <div class="page-subtitle">æ ¹æ®è§’è‰²å’Œåœºæ™¯ï¼Œç”Ÿæˆåˆé€‚çš„ä¼šè®®å‘è¨€</div>

        <!-- Role Selection -->
        <div class="section-label">é€‰æ‹©ä½ çš„è§’è‰² <span class="required">*</span></div>
        <div class="role-grid" id="roleGrid">
          <!-- Populated by JS -->
        </div>

        <!-- Scenario Selection -->
        <div class="section-label">é€‰æ‹©ä¼šè®®åœºæ™¯ <span class="required">*</span></div>
        <div class="scenario-grid" id="scenarioGrid">
          <!-- Populated by JS -->
        </div>

        <!-- Generate Button -->
        <button class="generate-btn" id="generateBtn" disabled>ç”Ÿæˆå‘è¨€å»ºè®®</button>
        <div class="generate-hint" id="generateHint">è¯·å…ˆé€‰æ‹©è§’è‰²å’Œä¼šè®®åœºæ™¯</div>
      </div>

      <!-- Result Area -->
      <div class="result-area" id="resultArea">
        <hr class="result-divider">
        <div class="result-header" id="resultHeader">
          <!-- Populated by JS -->
        </div>

        <div id="speechCards">
          <!-- Populated by JS -->
        </div>

        <!-- Tips -->
        <div class="tips-section">
          <span class="tips-icon">ğŸ’¡</span>
          <span class="tips-text">åœ¨å®é™…ä¼šè®®ä¸­ï¼Œæ ¹æ®æƒ…å†µçµæ´»è°ƒæ•´å‘è¨€å†…å®¹å’Œæ—¶æœºã€‚å»ºè®®æå‰å‡†å¤‡å¥½å…³é”®æ•°æ®å’Œè®ºæ®ï¼Œå‘è¨€æ—¶ä¿æŒè‡ªä¿¡ã€ç®€æ´ï¼Œæ³¨æ„å€¾å¬ä»–äººè§‚ç‚¹ã€‚</span>
        </div>

        <!-- Action Buttons -->
        <div class="action-row">
          <button class="action-btn primary" id="regenerateBtn">ğŸ”„ é‡æ–°ç”Ÿæˆ</button>
          <button class="action-btn" id="copyAllBtn">ğŸ“‹ å¤åˆ¶å…¨éƒ¨</button>
        </div>
        <div class="copy-success" id="copySuccess">å·²å¤åˆ¶åˆ°å‰ªè´´æ¿</div>
      </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-left">
        <span><span class="status-dot"></span>pua-cli meeting-suggest</span>
        <span id="statusInfo">ç­‰å¾…è¾“å…¥...</span>
      </div>
      <div style="display:flex;align-items:center;gap:0;font-size:11px;">
        <a href="index.html">é¦–é¡µ</a>
        <span class="sep" style="color:#444;margin:0 6px;">|</span>
        <a href="jargon.html">é»‘è¯</a>
        <span class="sep" style="color:#444;margin:0 6px;">|</span>
        <a href="weekly.html">å‘¨æŠ¥</a>
        <span class="sep" style="color:#444;margin:0 6px;">|</span>
        <a href="email.html">é‚®ä»¶</a>
        <span class="sep" style="color:#444;margin:0 6px;">|</span>
        <a href="meeting.html">ä¼šè®®å®¤</a>
        <span class="sep" style="color:#444;margin:0 6px;">|</span>
        <a href="interview.html">é¢è¯•</a>
        <span class="sep" style="color:#444;margin:0 6px;">|</span>
        <a href="https://github.com/ava-agent/pua-cli" target="_blank" rel="noopener">GitHub</a>
      </div>
    </div>
  </div>

  <script>
    // ============================================================
    // DATA
    // ============================================================

    const ROLES = {
      boss:     { name: 'è€æ¿',     emoji: 'ğŸ‘”', desc: 'ç®¡ç†è§†è§’ï¼Œå¼ºè°ƒç»“æœ', color: '#ff4444', glow: 'rgba(255,68,68,0.4)' },
      employee: { name: 'å‘˜å·¥',     emoji: 'ğŸ˜“', desc: 'æ±‡æŠ¥è¿›å±•ï¼Œå¯»æ±‚æ”¯æŒ', color: '#ffcc00', glow: 'rgba(255,204,0,0.4)' },
      pm:       { name: 'äº§å“ç»ç†', emoji: 'ğŸ“‹', desc: 'äº§å“æ€ç»´ï¼Œå¯¹é½éœ€æ±‚', color: '#4488ff', glow: 'rgba(68,136,255,0.4)' },
      hr:       { name: 'HR',       emoji: 'ğŸ’¼', desc: 'å…³æ³¨å›¢é˜Ÿï¼Œæ–‡åŒ–å»ºè®¾', color: '#44cc44', glow: 'rgba(68,204,68,0.4)' },
      techlead: { name: 'æŠ€æœ¯ä¸»ç®¡', emoji: 'ğŸ’»', desc: 'æŠ€æœ¯æŠŠæ§ï¼Œä»£ç è´¨é‡', color: '#cc44ff', glow: 'rgba(204,68,255,0.4)' },
      intern:   { name: 'å®ä¹ ç”Ÿ',   emoji: 'ğŸŒ±', desc: 'è™šå¿ƒå­¦ä¹ ï¼Œç§¯æå‚ä¸', color: '#00ccff', glow: 'rgba(0,204,255,0.4)' }
    };

    const MEETING_SCENARIOS = {
      standup:   { name: 'æ¯æ—¥ç«™ä¼š',   description: 'å¿«é€ŸåŒæ­¥å·¥ä½œè¿›å±•å’Œè®¡åˆ’',   duration: '15åˆ†é’Ÿ',    emoji: 'ğŸƒ' },
      review:    { name: 'è¯„å®¡ä¼šè®®',   description: 'æ–¹æ¡ˆè¯„å®¡/ä»£ç è¯„å®¡/äº§å“è¯„å®¡', duration: '30-60åˆ†é’Ÿ', emoji: 'ğŸ”' },
      brainstorm:{ name: 'å¤´è„‘é£æš´',   description: 'åˆ›æ„å‘æ•£å’Œæ–¹æ¡ˆè®¨è®º',       duration: '30-90åˆ†é’Ÿ', emoji: 'ğŸ’¡' },
      retro:     { name: 'å›é¡¾ä¼šè®®',   description: 'æ€»ç»“ç»éªŒæ•™è®­å’Œæ”¹è¿›ç‚¹',     duration: '60åˆ†é’Ÿ',    emoji: 'ğŸ”„' },
      planning:  { name: 'è§„åˆ’ä¼šè®®',   description: 'è¿­ä»£è§„åˆ’å’Œä»»åŠ¡åˆ†é…',       duration: '60åˆ†é’Ÿ',    emoji: 'ğŸ“…' }
    };

    // ============================================================
    // STATE
    // ============================================================

    let selectedRole = null;
    let selectedScenario = null;

    // ============================================================
    // RENDER FUNCTIONS
    // ============================================================

    function renderRoleGrid() {
      const grid = document.getElementById('roleGrid');
      const entries = Object.entries(ROLES);
      grid.innerHTML = entries.map(function(entry) {
        const key = entry[0];
        const role = entry[1];
        return '<div class="role-card" data-role="' + key + '" ' +
          'style="--role-color:' + role.color + '; --role-glow:' + role.glow + '">' +
          '<div class="role-check">&#10003;</div>' +
          '<span class="role-emoji">' + role.emoji + '</span>' +
          '<div class="role-name">' + role.name + '</div>' +
          '<div class="role-desc">' + role.desc + '</div>' +
          '</div>';
      }).join('');
    }

    function renderScenarioGrid() {
      const grid = document.getElementById('scenarioGrid');
      const entries = Object.entries(MEETING_SCENARIOS);
      grid.innerHTML = entries.map(function(entry) {
        var key = entry[0];
        var sc = entry[1];
        return '<div class="scenario-card" data-scenario="' + key + '">' +
          '<div class="scenario-check">&#10003;</div>' +
          '<span class="scenario-emoji">' + sc.emoji + '</span>' +
          '<div class="scenario-name">' + sc.name + '</div>' +
          '<div class="scenario-desc">' + sc.description + '</div>' +
          '<span class="scenario-duration">' + sc.duration + '</span>' +
          '</div>';
      }).join('');
    }

    function updateButtonState() {
      var btn = document.getElementById('generateBtn');
      var hint = document.getElementById('generateHint');
      if (selectedRole && selectedScenario) {
        btn.disabled = false;
        var roleName = ROLES[selectedRole].name;
        var scenarioName = MEETING_SCENARIOS[selectedScenario].name;
        hint.textContent = roleName + ' + ' + scenarioName + ' \u2192 ç‚¹å‡»ç”Ÿæˆ';
      } else if (selectedRole) {
        btn.disabled = true;
        hint.textContent = 'è¯·é€‰æ‹©ä¼šè®®åœºæ™¯';
      } else if (selectedScenario) {
        btn.disabled = true;
        hint.textContent = 'è¯·é€‰æ‹©ä½ çš„è§’è‰²';
      } else {
        btn.disabled = true;
        hint.textContent = 'è¯·å…ˆé€‰æ‹©è§’è‰²å’Œä¼šè®®åœºæ™¯';
      }
    }

    function updateStatusInfo() {
      var info = document.getElementById('statusInfo');
      if (selectedRole && selectedScenario) {
        info.textContent = ROLES[selectedRole].name + ' | ' + MEETING_SCENARIOS[selectedScenario].name;
      } else {
        info.textContent = 'ç­‰å¾…è¾“å…¥...';
      }
    }

    // ============================================================
    // GENERATION
    // ============================================================

    async function generateSuggestions() {
      if (!selectedRole || !selectedScenario) return;

      // Loading state
      var btn = document.getElementById('generateBtn');
      var originalText = btn.textContent;
      btn.disabled = true;
      btn.textContent = 'ç”Ÿæˆä¸­...';

      try {
        var response = await fetch('/api/meeting-suggest', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            role: selectedRole,
            scenario: selectedScenario
          })
        });

        if (!response.ok) {
          var errorData = await response.json().catch(function() { return {}; });
          throw new Error(errorData.error || 'è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
        }

        var data = await response.json();
        var suggestions = data.suggestions;

        if (!suggestions || suggestions.length === 0) {
          throw new Error('æœªèƒ½ç”Ÿæˆå»ºè®®ï¼Œè¯·é‡è¯•');
        }

        renderResult(suggestions);
      } catch (error) {
        // Show error in result area
        var resultArea = document.getElementById('resultArea');
        var speechCards = document.getElementById('speechCards');
        speechCards.innerHTML = '<div style="color:#ff5f56;text-align:center;padding:20px;">' +
          escapeHtml(error.message || 'ç”Ÿæˆå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•') + '</div>';
        resultArea.classList.add('visible');
      } finally {
        btn.disabled = false;
        btn.textContent = originalText;
        updateButtonState(); // re-check if should be disabled
      }
    }

    function renderResult(suggestions) {
      var role = ROLES[selectedRole];
      var scenario = MEETING_SCENARIOS[selectedScenario];

      // Header
      var header = document.getElementById('resultHeader');
      header.innerHTML =
        '<span class="result-tag"><span class="label">åœºæ™¯:</span><span class="value">' +
        scenario.emoji + ' ' + scenario.name + '</span></span>' +
        '<span class="result-tag"><span class="label">è§’è‰²:</span><span class="value">' +
        role.emoji + ' ' + role.name + '</span></span>' +
        '<span class="result-tag"><span class="label">æ—¶é•¿:</span><span class="value">' +
        scenario.duration + '</span></span>';

      // Speech cards
      var cards = document.getElementById('speechCards');
      cards.innerHTML = suggestions.map(function(text, i) {
        return '<div class="speech-card" style="--speech-color:' + role.color + '">' +
          '<div class="speech-badge" style="background:' + role.color + '">' + (i + 1) + '</div>' +
          '<div class="speech-content">' + escapeHtml(text) + '</div>' +
          '</div>';
      }).join('');

      // Show result area
      var resultArea = document.getElementById('resultArea');
      resultArea.classList.add('visible');

      // Reset copy success
      document.getElementById('copySuccess').classList.remove('show');

      // Scroll to result
      setTimeout(function() {
        resultArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }, 100);

      // Update status
      document.getElementById('statusRight').textContent = suggestions.length + ' æ¡å»ºè®® | v0.8.0';
    }

    function escapeHtml(str) {
      var div = document.createElement('div');
      div.appendChild(document.createTextNode(str));
      return div.innerHTML;
    }

    // ============================================================
    // COPY
    // ============================================================

    function copyAllSuggestions() {
      var cards = document.querySelectorAll('.speech-content');
      if (cards.length === 0) return;

      var role = ROLES[selectedRole];
      var scenario = MEETING_SCENARIOS[selectedScenario];

      var lines = [];
      lines.push('ä¼šè®®å‘è¨€å»ºè®®');
      lines.push('è§’è‰²: ' + role.emoji + ' ' + role.name + ' | åœºæ™¯: ' + scenario.emoji + ' ' + scenario.name + ' | æ—¶é•¿: ' + scenario.duration);
      lines.push('---');

      cards.forEach(function(card, i) {
        lines.push((i + 1) + '. ' + card.textContent.trim());
      });

      lines.push('');
      lines.push('-- ç”Ÿæˆè‡ª PUA CLI ä¼šè®®å‘è¨€å»ºè®®');

      var text = lines.join('\n');

      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text).then(function() {
          showCopySuccess();
        }).catch(function() {
          fallbackCopy(text);
        });
      } else {
        fallbackCopy(text);
      }
    }

    function fallbackCopy(text) {
      var textarea = document.createElement('textarea');
      textarea.value = text;
      textarea.style.position = 'fixed';
      textarea.style.left = '-9999px';
      document.body.appendChild(textarea);
      textarea.select();
      try {
        document.execCommand('copy');
        showCopySuccess();
      } catch (e) {
        // silent
      }
      document.body.removeChild(textarea);
    }

    function showCopySuccess() {
      var el = document.getElementById('copySuccess');
      el.classList.add('show');
      setTimeout(function() {
        el.classList.remove('show');
      }, 2000);
    }

    // ============================================================
    // EVENT LISTENERS
    // ============================================================

    document.addEventListener('DOMContentLoaded', function() {
      renderRoleGrid();
      renderScenarioGrid();

      // Role selection
      document.getElementById('roleGrid').addEventListener('click', function(e) {
        var card = e.target.closest('.role-card');
        if (!card) return;

        var role = card.getAttribute('data-role');

        // Deselect previous
        var prev = document.querySelector('.role-card.selected');
        if (prev) prev.classList.remove('selected');

        // Select new (or deselect if same)
        if (selectedRole === role) {
          selectedRole = null;
        } else {
          selectedRole = role;
          card.classList.add('selected');
        }

        updateButtonState();
        updateStatusInfo();
      });

      // Scenario selection
      document.getElementById('scenarioGrid').addEventListener('click', function(e) {
        var card = e.target.closest('.scenario-card');
        if (!card) return;

        var scenario = card.getAttribute('data-scenario');

        // Deselect previous
        var prev = document.querySelector('.scenario-card.selected');
        if (prev) prev.classList.remove('selected');

        // Select new (or deselect if same)
        if (selectedScenario === scenario) {
          selectedScenario = null;
        } else {
          selectedScenario = scenario;
          card.classList.add('selected');
        }

        updateButtonState();
        updateStatusInfo();
      });

      // Generate
      document.getElementById('generateBtn').addEventListener('click', function() {
        generateSuggestions();
      });

      // Regenerate
      document.getElementById('regenerateBtn').addEventListener('click', function() {
        generateSuggestions();
      });

      // Copy all
      document.getElementById('copyAllBtn').addEventListener('click', function() {
        copyAllSuggestions();
      });
    });
  </script>
</body>
</html>
