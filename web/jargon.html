<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>èŒåœºé»‘è¯ç”Ÿæˆå™¨ - PUA CLI</title>
  <meta name="description" content="èŒåœºé»‘è¯ç”Ÿæˆå™¨ - è®©ä½ çš„è¡¨è¾¾æ›´æœ‰èŒåœºèŒƒå„¿ï¼Œé»‘è¯è¯åº“æµè§ˆä¸æ–‡æœ¬ç¿»è¯‘">
  <meta property="og:title" content="èŒåœºé»‘è¯ç”Ÿæˆå™¨ - PUA CLI">
  <meta property="og:description" content="ä¸€é”®ç”ŸæˆèŒåœºé»‘è¯ï¼Œæ”¯æŒä¼šè®®ã€æŠ¥å‘Šã€é‚®ä»¶ã€èŠå¤©å››ç§åœºæ™¯">
  <meta name="theme-color" content="#0a0a0a">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ—£ï¸</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'JetBrains Mono', 'Consolas', monospace;
      background: #0a0a0a;
      min-height: 100vh;
      overflow-x: hidden;
      color: #e0e0e0;
    }

    /* === Terminal Shell === */
    .terminal {
      width: 90%;
      max-width: 900px;
      margin: 30px auto 40px;
      background: #0a0a0a;
      border: 1px solid #333;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      display: flex;
      flex-direction: column;
      height: calc(100vh - 120px);
      overflow: hidden;
    }

    .terminal-header {
      padding: 10px 16px;
      background: #1a1a1a;
      display: flex;
      align-items: center;
      gap: 8px;
      border-bottom: 1px solid #333;
    }

    .terminal-buttons { display: flex; gap: 8px; }
    .terminal-btn { width: 12px; height: 12px; border-radius: 50%; }
    .terminal-btn.close { background: #ff5f56; }
    .terminal-btn.minimize { background: #ffbd2e; }
    .terminal-btn.maximize { background: #27ca3f; }

    .terminal-title { color: #888; font-size: 12px; flex: 1; text-align: center; }

    .terminal-body {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      overflow-x: hidden;
      background: #0a0a0a;
      scroll-behavior: smooth;
      min-height: 0;
    }

    .terminal-body::-webkit-scrollbar { width: 8px; }
    .terminal-body::-webkit-scrollbar-track { background: #0a0a0a; }
    .terminal-body::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
    .terminal-body::-webkit-scrollbar-thumb:hover { background: #444; }

    /* === Nav Bar === */
    .nav-bar {
      position: sticky;
      top: 0;
      z-index: 50;
      background: #111;
      border-bottom: 1px solid #222;
      padding: 0 16px;
      display: flex;
      align-items: center;
      gap: 0;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    .nav-bar::-webkit-scrollbar { height: 0; }
    .nav-link {
      color: #666;
      text-decoration: none;
      font-size: 12px;
      padding: 10px 14px;
      white-space: nowrap;
      transition: all 0.2s;
      border-bottom: 2px solid transparent;
      flex-shrink: 0;
    }
    .nav-link:hover {
      color: #ccc;
      background: #1a1a1a;
    }
    .nav-link.active {
      color: #00ccff;
      border-bottom-color: #00ccff;
    }

    /* === Setup Area === */
    .setup-area {
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; }
    }

    .page-title {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 6px;
      background: linear-gradient(90deg, #00ccff, #4488ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .page-subtitle {
      color: #666;
      font-size: 12px;
      margin-bottom: 24px;
    }

    /* === Mode Tabs === */
    .mode-tabs {
      display: flex;
      gap: 0;
      margin-bottom: 24px;
      border: 1px solid #333;
      border-radius: 8px;
      overflow: hidden;
    }

    .mode-tab {
      flex: 1;
      padding: 12px 16px;
      background: #111;
      color: #666;
      font-family: inherit;
      font-size: 13px;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }

    .mode-tab:first-child { border-right: 1px solid #333; }

    .mode-tab:hover {
      color: #00ccff;
      background: #0a1520;
    }

    .mode-tab.active {
      color: #00ccff;
      background: #0a1a2a;
      font-weight: 700;
    }

    /* === Mode Panels === */
    .mode-panel { display: none; }
    .mode-panel.active { display: block; }

    /* === Section Labels === */
    .section-label {
      color: #888;
      font-size: 12px;
      margin-bottom: 10px;
      display: block;
    }

    /* === Type Cards (2x2 Grid) === */
    .type-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 20px;
    }

    .type-card {
      background: #111;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 14px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
      position: relative;
    }

    .type-card:hover {
      border-color: #00ccff;
      background: #0a1520;
      box-shadow: 0 0 16px rgba(0, 204, 255, 0.08);
    }

    .type-card.selected {
      border-color: #00ccff;
      background: #0a1a2a;
      box-shadow: 0 0 20px rgba(0, 204, 255, 0.12);
    }

    .type-card.selected::after {
      content: '\2713';
      position: absolute;
      top: 8px;
      right: 10px;
      color: #00ccff;
      font-size: 14px;
      font-weight: 700;
    }

    .type-card .emoji { font-size: 24px; margin-bottom: 6px; }
    .type-card .name { color: #ddd; font-size: 13px; font-weight: 500; }
    .type-card .desc { color: #555; font-size: 10px; margin-top: 4px; }

    /* === Intensity Selector === */
    .intensity-options {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .intensity-btn {
      flex: 1;
      background: #111;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
      font-family: inherit;
      font-size: 12px;
      color: #888;
    }

    .intensity-btn:hover { border-color: #00ccff; color: #00ccff; }

    .intensity-btn.selected {
      border-color: #00ccff;
      background: #0a1a2a;
      color: #00ccff;
      font-weight: 700;
    }

    /* === Generate Button === */
    .generate-btn {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #0088cc, #00aaff);
      border: none;
      border-radius: 8px;
      color: white;
      font-family: inherit;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      margin-bottom: 20px;
    }

    .generate-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(0, 170, 255, 0.3);
    }

    .generate-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* === Result Area === */
    .result-area {
      display: none;
      animation: fadeIn 0.3s ease-out;
    }

    .result-area.visible { display: block; }

    .result-section-title {
      color: #00ccff;
      font-size: 13px;
      font-weight: 700;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* === Jargon Tags === */
    .jargon-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
    }

    .jargon-tag {
      background: #1a2a3a;
      border: 1px solid #00ccff;
      color: #00ccff;
      padding: 6px 14px;
      border-radius: 16px;
      font-size: 12px;
      font-family: inherit;
      transition: all 0.2s;
      cursor: default;
      animation: tagIn 0.3s ease-out backwards;
    }

    .jargon-tag:hover {
      background: #0a3050;
      box-shadow: 0 0 10px rgba(0, 204, 255, 0.2);
    }

    @keyframes tagIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }

    /* === Example Sentence Box === */
    .example-box {
      background: #111;
      border: 1px solid #333;
      border-left: 3px solid #00ccff;
      border-radius: 4px 8px 8px 4px;
      padding: 14px 18px;
      margin-bottom: 20px;
      color: #ccc;
      font-size: 13px;
      line-height: 1.6;
    }

    .example-box .example-label {
      color: #00ccff;
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 6px;
      display: block;
    }

    /* === Translation Panel === */
    .translate-input {
      width: 100%;
      min-height: 100px;
      background: #111;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 14px;
      color: #e0e0e0;
      font-family: inherit;
      font-size: 13px;
      resize: vertical;
      margin-bottom: 16px;
      transition: border-color 0.2s;
      line-height: 1.6;
    }

    .translate-input:focus {
      outline: none;
      border-color: #00ccff;
      box-shadow: 0 0 8px rgba(0, 204, 255, 0.15);
    }

    .translate-input::placeholder { color: #444; }

    /* === Translation Comparison === */
    .translation-compare {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }

    .compare-panel {
      background: #111;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 14px;
    }

    .compare-panel .compare-label {
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 8px;
      display: block;
    }

    .compare-panel.original .compare-label { color: #888; }
    .compare-panel.translated .compare-label { color: #00ccff; }

    .compare-panel.translated {
      border-color: #00ccff;
      background: #0a1520;
    }

    .compare-text {
      color: #ccc;
      font-size: 13px;
      line-height: 1.6;
      word-break: break-word;
    }

    /* === Action Buttons (Bottom) === */
    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 16px;
    }

    .action-btn {
      flex: 1;
      padding: 10px 16px;
      border-radius: 8px;
      font-family: inherit;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }

    .action-btn.regenerate {
      background: #111;
      border: 1px solid #333;
      color: #888;
    }

    .action-btn.regenerate:hover {
      border-color: #00ccff;
      color: #00ccff;
      background: #0a1520;
    }

    .action-btn.copy {
      background: #0a1a2a;
      border: 1px solid #00ccff;
      color: #00ccff;
    }

    .action-btn.copy:hover {
      background: #0a3050;
      box-shadow: 0 0 12px rgba(0, 204, 255, 0.2);
    }

    .action-btn.copy.copied {
      background: #0a2a1a;
      border-color: #00ff88;
      color: #00ff88;
    }

    /* === Toast === */
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      background: #1a2a3a;
      border: 1px solid #00ccff;
      color: #00ccff;
      padding: 10px 24px;
      border-radius: 8px;
      font-family: inherit;
      font-size: 12px;
      opacity: 0;
      transition: all 0.3s ease-out;
      pointer-events: none;
      z-index: 200;
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    /* === Status Bar === */
    .status-bar {
      background: #1a1a1a;
      padding: 6px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-top: 1px solid #333;
      font-size: 11px;
    }

    .status-bar .left { color: #00ccff; }

    .status-bar .right {
      color: #666;
      display: flex;
      align-items: center;
      gap: 0;
    }

    .status-bar a {
      color: #00ccff;
      text-decoration: none;
      transition: color 0.2s;
    }

    .status-bar a:hover { color: #00ffff; }

    .status-bar .sep { color: #444; margin: 0 6px; }

    /* === Responsive === */
    @media (max-width: 600px) {
      .terminal {
        width: 95%;
        margin: 10px auto;
        height: calc(100vh - 20px);
      }

      .terminal-body { padding: 12px; }

      .type-grid { grid-template-columns: 1fr; }

      .intensity-options { flex-direction: column; }

      .translation-compare {
        grid-template-columns: 1fr;
      }

      .nav-link { font-size: 11px; padding: 8px 10px; }

      .status-bar {
        flex-direction: column;
        gap: 4px;
        align-items: flex-start;
      }

      .page-title { font-size: 18px; }
    }
  </style>
  <!-- Vercel Web Analytics -->
  <script>window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };</script>
  <script defer src="/_vercel/insights/script.js"></script>
</head>
<body>
  <nav class="nav-bar">
    <a class="nav-link" href="index.html">é¦–é¡µ</a>
    <a class="nav-link active" href="jargon.html">é»‘è¯ç”Ÿæˆ</a>
    <a class="nav-link" href="weekly.html">å‘¨æŠ¥ç”Ÿæˆ</a>
    <a class="nav-link" href="email.html">é‚®ä»¶è½¬æ¢</a>
    <a class="nav-link" href="meeting-suggest.html">ä¼šè®®å‘è¨€</a>
    <a class="nav-link" href="meeting.html">ä¼šè®®å®¤</a>
    <a class="nav-link" href="interview.html">å‹åŠ›é¢è¯•</a>
  </nav>
  <div class="terminal">
    <!-- Terminal Header -->
    <div class="terminal-header">
      <div class="terminal-buttons">
        <div class="terminal-btn close"></div>
        <div class="terminal-btn minimize"></div>
        <div class="terminal-btn maximize"></div>
      </div>
      <div class="terminal-title">èŒåœºé»‘è¯ç”Ÿæˆå™¨ â€” pua-cli</div>
    </div>

    <!-- Terminal Body -->
    <div class="terminal-body" id="terminalBody">
      <!-- Setup Area -->
      <div class="setup-area">
        <div class="page-title">ğŸ—£ï¸ èŒåœºé»‘è¯ç”Ÿæˆå™¨</div>
        <div class="page-subtitle">è®©ä½ çš„è¡¨è¾¾æ›´æœ‰"èŒåœºèŒƒå„¿"</div>

        <!-- Mode Tabs -->
        <div class="mode-tabs">
          <button class="mode-tab active" data-mode="dictionary" id="tabDictionary">ğŸ“š é»‘è¯è¯åº“</button>
          <button class="mode-tab" data-mode="translate" id="tabTranslate">ğŸ”„ æ–‡æœ¬ç¿»è¯‘</button>
        </div>

        <!-- ====== Mode 1: Dictionary Browse ====== -->
        <div class="mode-panel active" id="panelDictionary">
          <!-- Type Selection -->
          <div class="section-label">é€‰æ‹©é»‘è¯ç±»å‹</div>
          <div class="type-grid" id="typeGrid">
            <div class="type-card" data-type="meeting">
              <div class="emoji">ğŸ¢</div>
              <div class="name">ä¼šè®®</div>
              <div class="desc">å¯¹é½ã€æ‹‰é€šã€é—­ç¯...</div>
            </div>
            <div class="type-card" data-type="report">
              <div class="emoji">ğŸ“Š</div>
              <div class="name">æŠ¥å‘Š</div>
              <div class="desc">å¤ç›˜ã€è¿­ä»£ã€èµ‹èƒ½...</div>
            </div>
            <div class="type-card" data-type="email">
              <div class="emoji">ğŸ“§</div>
              <div class="name">é‚®ä»¶</div>
              <div class="desc">æœ›ã€å¦¥å¦ã€å•†ç¥º...</div>
            </div>
            <div class="type-card" data-type="chat">
              <div class="emoji">ğŸ’¬</div>
              <div class="name">èŠå¤©</div>
              <div class="desc">é¢—ç²’åº¦ã€æŠ¤åŸæ²³ã€OKR...</div>
            </div>
          </div>

          <!-- Intensity Selection -->
          <div class="section-label">é€‰æ‹©å¼ºåº¦</div>
          <div class="intensity-options" id="intensityOptions">
            <button class="intensity-btn" data-intensity="light">ğŸŸ¢ è½»åº¦ (5ä¸ª)</button>
            <button class="intensity-btn selected" data-intensity="medium">ğŸŸ¡ ä¸­åº¦ (10ä¸ª)</button>
            <button class="intensity-btn" data-intensity="heavy">ğŸ”´ é‡åº¦ (å…¨éƒ¨)</button>
          </div>

          <!-- Generate Button -->
          <button class="generate-btn" id="generateBtn" disabled>ç”Ÿæˆé»‘è¯</button>
          <div id="generateHint" style="color:#00aacc;font-size:11px;text-align:center;margin-bottom:16px;margin-top:-12px;">è¯·å…ˆé€‰æ‹©é»‘è¯ç±»å‹</div>

          <!-- Dictionary Result Area -->
          <div class="result-area" id="dictResult">
            <div class="result-section-title"><span>ğŸ“‹</span> é»‘è¯è¯æ±‡</div>
            <div class="jargon-tags" id="jargonTags"></div>

            <div class="result-section-title"><span>ğŸ’¡</span> ä¾‹å¥</div>
            <div class="example-box" id="exampleBox">
              <span class="example-label">Example Sentence</span>
              <span id="exampleText"></span>
            </div>

            <div class="action-buttons">
              <button class="action-btn regenerate" id="regenerateDict">ğŸ”„ é‡æ–°ç”Ÿæˆ</button>
              <button class="action-btn copy" id="copyDict">ğŸ“‹ å¤åˆ¶å…¨éƒ¨</button>
            </div>
          </div>
        </div>

        <!-- ====== Mode 2: Text Translation ====== -->
        <div class="mode-panel" id="panelTranslate">
          <!-- Input Area -->
          <div class="section-label">è¾“å…¥æ™®é€šæ–‡æœ¬</div>
          <textarea class="translate-input" id="translateInput"
            placeholder="è¾“å…¥ä½ æƒ³è¯´çš„è¯ï¼Œæ¯”å¦‚ï¼š&#10;æˆ‘ä»¬éœ€è¦è®¨è®ºä¸€ä¸‹è¿™ä¸ªé¡¹ç›®çš„è¿›å±•&#10;è¿™ä¸ªæ–¹æ¡ˆè¿˜éœ€è¦æƒ³æƒ³&#10;è¯·å¸®å¿™åšä¸€ä¸‹è¿™ä¸ªä»»åŠ¡"
            maxlength="500"></textarea>

          <!-- Intensity Selection (for translate) -->
          <div class="section-label">ç¿»è¯‘å¼ºåº¦</div>
          <div class="intensity-options" id="translateIntensityOptions">
            <button class="intensity-btn" data-intensity="light">ğŸŸ¢ è½»åº¦</button>
            <button class="intensity-btn selected" data-intensity="medium">ğŸŸ¡ ä¸­åº¦</button>
            <button class="intensity-btn" data-intensity="heavy">ğŸ”´ é‡åº¦</button>
          </div>

          <!-- Translate Button -->
          <button class="generate-btn" id="translateBtn">ç¿»è¯‘ä¸ºé»‘è¯</button>

          <!-- Translation Result -->
          <div class="result-area" id="translateResult">
            <div class="result-section-title"><span>ğŸ”„</span> ç¿»è¯‘ç»“æœ</div>
            <div class="translation-compare">
              <div class="compare-panel original">
                <span class="compare-label">åŸæ–‡</span>
                <div class="compare-text" id="originalText"></div>
              </div>
              <div class="compare-panel translated">
                <span class="compare-label">é»‘è¯ç‰ˆ</span>
                <div class="compare-text" id="translatedText"></div>
              </div>
            </div>

            <div class="action-buttons">
              <button class="action-btn regenerate" id="regenerateTranslate">ğŸ”„ é‡æ–°ç¿»è¯‘</button>
              <button class="action-btn copy" id="copyTranslate">ğŸ“‹ å¤åˆ¶è¯‘æ–‡</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="left">
        <span>ğŸ—£ï¸ èŒåœºé»‘è¯ç”Ÿæˆå™¨</span>
      </div>
      <div class="right">
        <a href="index.html">é¦–é¡µ</a>
        <span class="sep">|</span>
        <a href="weekly.html">å‘¨æŠ¥</a>
        <span class="sep">|</span>
        <a href="email.html">é‚®ä»¶</a>
        <span class="sep">|</span>
        <a href="meeting-suggest.html">å‘è¨€</a>
        <span class="sep">|</span>
        <a href="meeting.html">ä¼šè®®å®¤</a>
        <span class="sep">|</span>
        <a href="interview.html">é¢è¯•</a>
        <span class="sep">|</span>
        <a href="https://github.com/ava-agent/pua-cli" target="_blank" rel="noopener">GitHub</a>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script>
    // ================================================
    // Data
    // ================================================
    const JARGON_DICT = {
      meeting: [
        'å¯¹é½', 'æ‹‰é€š', 'æ²‰æ·€', 'èµ‹èƒ½', 'é—­ç¯', 'æŠ“æ‰‹', 'æ‰“æ³•',
        'ç»„åˆæ‹³', 'çŸ©é˜µ', 'ååŒ', 'è”åŠ¨', 'å…±æŒ¯', 'è£‚å˜',
        'æ¸—é€', 'å‡»ç©¿', 'è½åœ°', 'å¤ç›˜', 'è¿­ä»£', 'æ•æ·',
        'é¢—ç²’åº¦', 'é“¾è·¯', 'ç—›ç‚¹', 'ç—’ç‚¹', 'æŠ“æ‰‹', 'åº•åº§',
        'ä¸­å°', 'å‰ç«¯', 'åç«¯', 'å…¨é“¾è·¯', 'ç«¯åˆ°ç«¯', 'ç”Ÿå‘½å‘¨æœŸ'
      ],
      report: [
        'å¤ç›˜', 'è¿­ä»£', 'è£‚å˜', 'çŸ©é˜µ', 'ç»„åˆæ‹³', 'æ·±æŒ–',
        'èµ‹èƒ½', 'åŠ æŒ', 'ç»´åº¦', 'è§†è§’', 'èµ›é“', 'é”šç‚¹', 'æ”¯ç‚¹', 'æ æ†', 'æ’¬åŠ¨', 'è¾å°„', 'è¦†ç›–',
        'æ¸—é€', 'ä¸‹æ²‰', 'ä¸Šè¡Œ', 'è¾“å‡º', 'äº¤ä»˜', 'é—­ç¯',
        'è®¤çŸ¥', 'å¿ƒæ™º', 'æ„ŸçŸ¥', 'ä½“æ„Ÿ', 'è§¦ç‚¹', 'è·¯å¾„', 'æ‰“æ³•', 'æ¨¡å‹', 'èŒƒå¼', 'ä½“ç³»', 'æ–¹æ³•è®º'
      ],
      email: [
        'æœ›', 'è°¢è°¢', 'è¾›è‹¦äº†', 'åŠ³çƒ¦', 'æ•¬è¯·',
        'å¦¥å¦', 'æ”¶åˆ°', 'è¯·å›å¤', 'ä¸ºç›¼', 'é¡ºé¢‚', 'å•†ç¥º',
        'å°½å¿«', 'æ–¹ä¾¿', 'éº»çƒ¦', 'ååŠ©', 'æ”¯æŒ', 'é…åˆ',
        'æ¨è¿›', 'è½å®', 'å®Œæˆ', 'è·Ÿè¿›', 'åé¦ˆ', 'ç¡®è®¤',
        'æŠ„é€', 'å‘ˆæŠ¥', 'æ±‡æŠ¥', 'åŒæ­¥', 'å¯¹é½', 'æ‹‰é€š'
      ],
      chat: [
        'é¢—ç²’åº¦', 'æŠ¤åŸæ²³', 'é™æœ¬å¢æ•ˆ', 'å¤©èŠ±æ¿', 'ç“¶é¢ˆ',
        'èµ‹èƒ½', 'è¿­ä»£', 'æ•æ·', 'ç€‘å¸ƒ', 'Scrum', 'Daily',
        'OKR', 'KPI', 'GMV', 'DAU', 'MAU',
        'è½¬åŒ–', 'ç•™å­˜', 'ä¿ƒæ´»', 'å¬å›', 'è£‚å˜', 'ä¼ æ’­',
        'ç—›ç‚¹', 'çˆ½ç‚¹', 'åœºæ™¯', 'æ¡ˆä¾‹', 'æ–¹æ³•è®º', 'æœ€ä½³å®è·µ'
      ]
    };

    const TYPE_NAMES = {
      meeting: 'ä¼šè®®',
      report: 'æŠ¥å‘Š',
      email: 'é‚®ä»¶',
      chat: 'èŠå¤©'
    };

    // ================================================
    // State
    // ================================================
    let selectedType = null;
    let dictIntensity = 'medium';
    let translateIntensity = 'medium';
    let currentMode = 'dictionary';
    let lastDictResult = null;
    let lastTranslateResult = null;

    // ================================================
    // Elements
    // ================================================
    const tabDictionary = document.getElementById('tabDictionary');
    const tabTranslate = document.getElementById('tabTranslate');
    const panelDictionary = document.getElementById('panelDictionary');
    const panelTranslate = document.getElementById('panelTranslate');
    const typeGrid = document.getElementById('typeGrid');
    const generateBtn = document.getElementById('generateBtn');
    const generateHint = document.getElementById('generateHint');
    const dictResult = document.getElementById('dictResult');
    const jargonTags = document.getElementById('jargonTags');
    const exampleText = document.getElementById('exampleText');
    const translateInput = document.getElementById('translateInput');
    const translateBtn = document.getElementById('translateBtn');
    const translateResult = document.getElementById('translateResult');
    const originalText = document.getElementById('originalText');
    const translatedText = document.getElementById('translatedText');
    const toastEl = document.getElementById('toast');

    // ================================================
    // Mode Switching
    // ================================================
    tabDictionary.addEventListener('click', () => switchMode('dictionary'));
    tabTranslate.addEventListener('click', () => switchMode('translate'));

    function switchMode(mode) {
      currentMode = mode;

      tabDictionary.classList.toggle('active', mode === 'dictionary');
      tabTranslate.classList.toggle('active', mode === 'translate');
      panelDictionary.classList.toggle('active', mode === 'dictionary');
      panelTranslate.classList.toggle('active', mode === 'translate');
    }

    // ================================================
    // Type Selection
    // ================================================
    typeGrid.addEventListener('click', (e) => {
      const card = e.target.closest('.type-card');
      if (!card) return;

      document.querySelectorAll('.type-card').forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
      selectedType = card.dataset.type;

      generateBtn.disabled = false;
      generateHint.style.display = 'none';
    });

    // ================================================
    // Intensity Selection (Dictionary)
    // ================================================
    document.getElementById('intensityOptions').addEventListener('click', (e) => {
      const btn = e.target.closest('.intensity-btn');
      if (!btn) return;

      document.querySelectorAll('#intensityOptions .intensity-btn').forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      dictIntensity = btn.dataset.intensity;
    });

    // ================================================
    // Intensity Selection (Translate)
    // ================================================
    document.getElementById('translateIntensityOptions').addEventListener('click', (e) => {
      const btn = e.target.closest('.intensity-btn');
      if (!btn) return;

      document.querySelectorAll('#translateIntensityOptions .intensity-btn').forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      translateIntensity = btn.dataset.intensity;
    });

    // ================================================
    // Dictionary Generation
    // ================================================
    generateBtn.addEventListener('click', generateDictionary);
    document.getElementById('regenerateDict').addEventListener('click', generateDictionary);

    async function generateDictionary() {
      if (!selectedType) return;

      const allWords = JARGON_DICT[selectedType];
      if (!allWords || allWords.length === 0) return;

      // Determine count based on intensity
      let count;
      switch (dictIntensity) {
        case 'light': count = 5; break;
        case 'medium': count = 10; break;
        case 'heavy': count = allWords.length; break;
        default: count = 10;
      }

      // Get words (shuffle for variety, then take the slice)
      const shuffled = shuffleArray([...allWords]);
      const selectedWords = shuffled.slice(0, Math.min(count, allWords.length));

      // Render jargon tags
      jargonTags.innerHTML = '';
      selectedWords.forEach((word, index) => {
        const tag = document.createElement('span');
        tag.className = 'jargon-tag';
        tag.textContent = word;
        tag.style.animationDelay = `${index * 0.05}s`;
        jargonTags.appendChild(tag);
      });

      // Show result area with loading state for the sentence
      exampleText.textContent = 'ç”Ÿæˆä¸­...';
      dictResult.classList.add('visible');

      // Set loading state on buttons
      const regenerateDict = document.getElementById('regenerateDict');
      generateBtn.disabled = true;
      regenerateDict.disabled = true;
      const prevBtnText = generateBtn.textContent;
      generateBtn.textContent = 'ç”Ÿæˆä¸­...';

      try {
        const response = await fetch('/api/jargon', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            mode: 'generate',
            input: selectedType,
            scene: selectedType
          })
        });

        if (!response.ok) {
          const errorData = await response.json().catch(() => null);
          throw new Error(errorData?.error || `è¯·æ±‚å¤±è´¥ (${response.status})`);
        }

        const data = await response.json();
        const sentence = data.result || '';
        exampleText.textContent = sentence;

        // Store result for copy
        lastDictResult = {
          type: TYPE_NAMES[selectedType],
          words: selectedWords,
          sentence: sentence
        };
      } catch (error) {
        exampleText.textContent = 'ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•';
        showToast(error.message || 'ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•');
      } finally {
        generateBtn.disabled = false;
        regenerateDict.disabled = false;
        generateBtn.textContent = prevBtnText;
      }

      // Scroll to result
      requestAnimationFrame(() => {
        dictResult.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      });
    }

    // ================================================
    // Text Translation
    // ================================================
    translateBtn.addEventListener('click', translateText);
    document.getElementById('regenerateTranslate').addEventListener('click', translateText);

    async function translateText() {
      const input = translateInput.value.trim();
      if (!input) {
        showToast('è¯·å…ˆè¾“å…¥è¦ç¿»è¯‘çš„æ–‡æœ¬');
        return;
      }

      // Set loading state
      const regenerateTranslate = document.getElementById('regenerateTranslate');
      translateBtn.disabled = true;
      regenerateTranslate.disabled = true;
      const prevBtnText = translateBtn.textContent;
      translateBtn.textContent = 'ç¿»è¯‘ä¸­...';

      try {
        const response = await fetch('/api/jargon', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            mode: 'translate',
            input: input
          })
        });

        if (!response.ok) {
          const errorData = await response.json().catch(() => null);
          throw new Error(errorData?.error || `è¯·æ±‚å¤±è´¥ (${response.status})`);
        }

        const data = await response.json();
        const result = data.result || '';

        // Display result
        originalText.textContent = input;
        translatedText.textContent = result;

        lastTranslateResult = result;

        // Show result
        translateResult.classList.add('visible');

        // Scroll to result
        requestAnimationFrame(() => {
          translateResult.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        });
      } catch (error) {
        showToast(error.message || 'ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•');
      } finally {
        translateBtn.disabled = false;
        regenerateTranslate.disabled = false;
        translateBtn.textContent = prevBtnText;
      }
    }

    // ================================================
    // Copy Functions
    // ================================================
    document.getElementById('copyDict').addEventListener('click', () => {
      if (!lastDictResult) return;

      const text = `ã€${lastDictResult.type}é»‘è¯ã€‘\n`
        + `è¯æ±‡ï¼š${lastDictResult.words.join('ã€')}\n`
        + `ä¾‹å¥ï¼š${lastDictResult.sentence}`;

      copyToClipboard(text, document.getElementById('copyDict'));
    });

    document.getElementById('copyTranslate').addEventListener('click', () => {
      if (!lastTranslateResult) return;
      copyToClipboard(lastTranslateResult, document.getElementById('copyTranslate'));
    });

    function copyToClipboard(text, btnEl) {
      navigator.clipboard.writeText(text).then(() => {
        btnEl.classList.add('copied');
        btnEl.textContent = 'âœ“ å·²å¤åˆ¶';
        showToast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
        setTimeout(() => {
          btnEl.classList.remove('copied');
          btnEl.textContent = 'ğŸ“‹ å¤åˆ¶å…¨éƒ¨';
        }, 2000);
      }).catch(() => {
        // Fallback for older browsers
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        textarea.select();
        try {
          document.execCommand('copy');
          btnEl.classList.add('copied');
          btnEl.textContent = 'âœ“ å·²å¤åˆ¶';
          showToast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
          setTimeout(() => {
            btnEl.classList.remove('copied');
            btnEl.textContent = 'ğŸ“‹ å¤åˆ¶å…¨éƒ¨';
          }, 2000);
        } catch (err) {
          showToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
        }
        document.body.removeChild(textarea);
      });
    }

    // ================================================
    // Toast
    // ================================================
    function showToast(message) {
      toastEl.textContent = message;
      toastEl.classList.add('show');
      setTimeout(() => {
        toastEl.classList.remove('show');
      }, 2000);
    }

    // ================================================
    // Utilities
    // ================================================
    function shuffleArray(arr) {
      const result = [...arr];
      for (let i = result.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        const temp = result[i];
        result[i] = result[j];
        result[j] = temp;
      }
      return result;
    }

    // ================================================
    // Keyboard Shortcuts
    // ================================================
    document.addEventListener('keydown', (e) => {
      // Enter to generate/translate when focused on translate input
      if (e.key === 'Enter' && !e.shiftKey && document.activeElement === translateInput) {
        e.preventDefault();
        translateText();
      }
    });
  </script>
</body>
</html>
